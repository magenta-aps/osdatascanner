{% load i18n %}
{% load static %}
{% include "components/common/scripts.html" %}
{% include "components/common/header.html" %}
{% include "components/common/banner.html" %}
{% get_current_language as lang_code %}

<script src="{% static 'js/manual/manualHighlighting.js' %} "></script>

<body>

  <main class="manual wrapper">

    <aside class="table-of-content">
      <a href="#manual">
        <h3>{% trans "Manual" %}</h3>
      </a>
      <ul>
        <a href="#walkthrough">
          <li>{% trans "User Interface Walkthrough" %}</li>
        </a>
        <a href="#login">
          <li>{% trans "How to Sign in" %}</li>
        </a>
        <a href="#handling">
          <li>{% trans "Handling Matches" %}</li>
        </a>
        {% if settings.ARCHIVE_TAB %}
          <a href="#archive">
            <li>{% trans "Archive" %}</li>
          </a>
        {% endif %}
        <a href="#user_overview">
          <li>{% trans "My Overview" %}</li>
        </a>
        {% if request.user.account.leadertab_access %}
          <a href="#leader_overview">
            <li>{% trans "Leader Overview" %}</li>
          </a>
        {% endif %}
        {% if categorization %}
          <a href="#categorize">
            <li>{% trans "Categorization in Outlook" %}</li>
          </a>
        {% endif %}
        {% if file_delete %}
          <a href="#onedrive_delete">
            <li>{% trans "Deletion of OneDrive files" %}</li>
          </a>
        {% endif %}
      </ul>
      <a href="#FAQ">
        <h3>{% trans "Frequently Asked Questions" %}</h3>
      </a>
      {% include "components/manual/faq_toc.html" %}
    </aside>

    <div class="content">

      <h1 id="manual" class="page-title">{% trans "Manual" %}</h1>

      <h2 id="walkthrough">{% trans "User Interface Walkthrough" %}</h2>
      <div id="figure-20" class="figure-container">
        <a href="{% static 'manualimages/figur20_' %}{{ lang_code }}.png">
          <img src="{% static 'manualimages/figur20_' %}{{ lang_code }}.png" />
        </a>
        <p>{% trans "Figure 20: Functional overview 1 - Report module" %}</p>
      </div>
      <div id="figure-21" class="figure-container">
        <a href="{% static 'manualimages/figur21_' %}{{ lang_code }}.png">
          <img src="{% static 'manualimages/figur21_' %}{{ lang_code }}.png" />
        </a>
        <p>{% trans "Figure 21: Functional overview 2 - Report module" %}</p>
      </div>

      <h2 id="login">{% trans "How to Sign in" %}</h2>
      <p>{% trans "Open your browser (for instance Chrome, Edge, or Firefox) and go to:" %}</p>
      <p class="center-text">
        <span class="example-link">https://<span class="org-name">{% trans "organizationname" %}</span>.os2datascanner.dk</span>
      </p>
      <p>
        {% blocktrans trimmed %}
          Note that, instead of "organizationname" the part of the link to the organization's website
          that comes before ".dk" should be input.
        {% endblocktrans %}
      </p>
      <p>{% trans "From here, sign in using the username and password usually used for these systems." %}</p>
      <p>{% trans "If a different username and password has been provided, sign in using those instead." %}</p>
      <p>{% trans "If questions arise refer to your nearest manager, co-worker, or superuser." %}</p>
      <p class="emphasized">
        {% blocktrans trimmed %}
          If different login information is provided for every program used in the organization,
          this screen will be displayed. If, like most other orgnizations, you're provided with
          one username and password for all programs, a different page will be displayed.
        {% endblocktrans %}
      </p>
      <div id="figure-22" class="figure-container">
        <a href="{% static 'manualimages/figur22_' %}{{ lang_code }}.png">
          <img src="{% static 'manualimages/figur22_' %}{{ lang_code }}.png" />
        </a>
        <p>{% trans "Figure 22: Sign in - Report module" %}</p>
      </div>
      <p>
        {% blocktrans trimmed %}
          When signing in, all matches assigned to you will be displayed. From the report module,
          all relevant files can be opened and checked for matches. Note that, for this function
          to work on files from a network drive, some configurations have to be set.
        {% endblocktrans %}
      </p>

      <h2 id="handling">{% trans "Handling Matches" %}</h2>
      <div id="figure-23" class="figure-container">
        <a href="{% static 'manualimages/figur23_' %}{{ lang_code }}.png">
          <img src="{% static 'manualimages/figur23_' %}{{ lang_code }}.png" />
        </a>
        <p>{% trans "Figure 23: Office365 mailscan - Report module" %}</p>
      </div>
      <p>
        {% blocktrans trimmed %}
          Matches generated from scanners like Web- or Office365-scans on cloud services,
          can be opened from the report module.
        {% endblocktrans %}
      </p>
      <div id="figure-27" class="figure-container">
        <a href="{% static 'manualimages/figur27_' %}{{ lang_code }}.png">
          <img src="{% static 'manualimages/figur27_' %}{{ lang_code }}.png" />
        </a>
        <p>{% trans "Figure 27: Filescan - Report module" %}</p>
      </div>
      <p>
        {% blocktrans trimmed %}
          For matches generated from File- or Exchange-scans on an on-premise services to be opened,
          some configurations have to be set. If this isn't an option, the path to the file or
          folder where the match is found, can be copied from the report module.
        {% endblocktrans %}
      </p>
      <p>{% trans "Matches found be the scanners have to be manually removed." %}</p>
      <p>
        {% blocktrans trimmed %}
          This can be done by, opening the file, mail, or website and delete or edit the part
          marked as a match by the scanner.
        {% endblocktrans %}
      </p>
      <p>{% trans "When this has been done, mark the match as handled in the report module." %}</p>
      <h3>{% trans "Mass handling matches" %}</h3>
      <p>{% trans "If you want to handle more than one match at a time, you have to: " %}</p>
      <ol>
        <li>
          {% blocktrans trimmed %}
            Check the checkbox on each individual match you have handled, or check the top checkbox
            to select all matches on that page.
          {% endblocktrans %}
        </li>
        <li>{% trans "Click mark as handled at the top of the list." %}</li>
      </ol>
      <div id="figur-26" class="figure-container">
        <a href="{% static 'manualimages/figur26_' %}{{ lang_code }}.png">
          <img src="{% static 'manualimages/figur26_' %}{{ lang_code }}.png" />
        </a>
        <p>{% trans "Figure 26: Homepage - Report module" %}</p>
      </div>
      <p>
        {% blocktrans trimmed %}
          If a file or mail has been deleted but not marked as handled in the report module,
          it will be done automatically next time the same scannerjob is run.
        {% endblocktrans %}
      </p>

      {% if settings.ARCHIVE_TAB %}
        <h2 id="archive">{% trans "Archive" %}</h2>
        <p>
          {% blocktrans trimmed %}
            On the archive tab all already handled matches are displayed. It's possible to revert
            a match marked as handled, in case of a mistake.
          {% endblocktrans %}
        </p>
        <div id="figure-24" class="figure-container">
          <a href="{% static 'manualimages/figur24_' %}{{ lang_code }}.png">
            <img src="{% static 'manualimages/figur24_' %}{{ lang_code }}.png" />
          </a>
          <p>{% trans "Figure 24: Archive - Report module" %}</p>
        </div>
      {% endif %}

      <h2 id="user_overview">{% trans "My Overview" %}</h2>
      <p>{% trans "On my overview, the amount of unhandled matches per week is displayed." %}</p>
      <p>
        {% blocktrans trimmed %}
          The large number under each week indicates unhandled matches in total. The red number indicates
          the amount of matches found in that week, and the green indicates how many have been handled.
        {% endblocktrans %}
      </p>
      <p>{% trans "The graph showcases the development of matches during the past year." %}</p>
      <div id="figur-25" class="figure-container">
        <a href="{% static 'manualimages/figur25_' %}{{ lang_code }}.png">
          <img src="{% static 'manualimages/figur25_' %}{{ lang_code }}.png" />
        </a>
        <p>{% trans "Figure 25: My overview - Report module" %}</p>
      </div>
      <p>
        {% trans "Note that, matches will be assigned to you over the course of a scan so keep an eye out for new matches to be handled." %}
      </p>

      {% url "account-me" as my-account %}

      {% if request.user.account.leadertab_access %}
        <h2 id="leader_overview">{% trans "Leader Overview" %}</h2>

        <p>
          {% blocktrans trimmed %}
            The leader overview serves as a way for managers in OSdatascanner to gain an overview of
            the organizational units they manage. Here you can see a list of the users from each
            organizational unit and how many unhandled results are related to each user, as well as
            the calculated "status" of the user. Each table row, corresponding to a user, can be
            expanded to show that user's "my overview" page.
          {% endblocktrans %}
        </p>

        <h3>{% trans "Status" %}</h3>

        <p>
          {% blocktrans trimmed %}
            The "status" of a user is calculated from the way they have been handling results in the
            past 3 weeks. The intention is to indicate if a user is taking a fair amount of action
            or no action at all.
          {% endblocktrans %}
        </p>

        <p>
          {% blocktrans trimmed %}
            A user can have one of three different statuses: "Finished", "Accepted", or "Not
            accepted".
          {% endblocktrans %}

          <ul>
            <li>
              {% blocktrans trimmed %}
                The "Finished" status indicates that the user has no unhandled results.
              {% endblocktrans %}
            </li>
            <li>
              {% blocktrans trimmed %}
                The "Accepted" status indicates that the user has handled at least 75% of the
                results they have received in OSdatascanner during the last 3 weeks. The total
                amount of unhandled results is not considered, as long as the user have any
                unhandled results.
              {% endblocktrans %}
            </li>
            <li>
              {% blocktrans trimmed %}
                The "Not accepted" status indicates that the user has handled less than 75% of the
                results they received during the last 3 weeks.
              {% endblocktrans %}
            </li>
          </ul>
        </p>

        <h3>{% trans "Sending Notifications" %}</h3>

        <p>
          {% blocktrans trimmed %}
            It is possible to easily send notifications to users in your organizational units through
            the UI. Simply press the "Send notification"-button on the user's table row, and your
            preferred email client will open with the recipient's address pre-populated.
          {% endblocktrans %}
        </p>

        <p>
          {% blocktrans trimmed %}
            It is generally recommended to send personalized notifications in this way, as users
            already receive automated notifications about their results in OSdatascanner.
          {% endblocktrans %}
        </p>

        {% if organization.retention_policy %}
          <h3>{% trans "Retention policy" %}</h3>

          <p>
            {% blocktrans trimmed with retention_days=organization.retention_days %}
              Your organization has a retention policy of {{ retention_days }} days. This means that users are
              allowed to keep potential results for up to {{ retention_days }} days, before they must be handled in
              an appropriate way.
            {% endblocktrans %}
          </p>

          <p>
            {% blocktrans trimmed %}
              For this reason, you can see the number of unhandled "old" results related to each
              user in the leader overview. The number of old results indicate how many unhandled
              results related to each user are no longer covered by the retention policy.
            {% endblocktrans %}
          </p>

        {% endif %}

      {% endif %}

      {% if categorization %}
        <h2 id="categorize">{% trans "Categorization in Outlook" %}</h2>
        <p>
          {% blocktrans trimmed %}
            With OSdatascanner, it is possible to mark mails containing matches with a match-category
            in Outlook. To enable this feature, access your <a href="{{ my-account }}">profile page</a>
            and check the box called Categorize emails. Now when a scan is run, mails containing
            matchs will automatically be marked with a match category
          {% endblocktrans %}
        </p>
        <p>
          {% trans "When the feature has been enabled, mark mails with already found matches by clicking the button called Categorize." %}
        </p>
        <p>
          {% blocktrans trimmed %}
            Enabling this feature also adds a False positive category to Outlook. Mails marked with
            this category will no longer be seen as a match by OSdatascanner.
          {% endblocktrans %}
        </p>
      {% endif %}

      {% if file_delete %}
        <h2 id="onedrive_delete">{% trans "Deletion of OneDrive files" %}</h2>
        <p>
          {% blocktrans trimmed %}
            Pressing the "delete" button on a OneDrive result will move the given file to your recycling bin and mark the result as "Deleted" in OSdatascanner.
            Mass deletion is possible by first filtering by source type.
          {% endblocktrans %}
        </p>
        <h3>{% trans "Disclaimer:" %}</h3>
        <p>
          {% blocktrans trimmed %}
            Be aware that OSdatascanner does not back up your files or hold any responsibility in regard to potential loss of data.
            OSdatascanner cannot reverse your deletion.
          {% endblocktrans %}
        </p>
      {% endif %}

      <h1 id="FAQ">{% trans "Frequently Asked Questions" %}</h1>
      <p>{% trans "Here you can find answers to questions frequently asked by other users of OSdatascanner." %}</p>

      <h2 id="handle_delete">{% trans "Why doesn't 'handle' delete my file or email?" %}</h2>
      <p>
        {% blocktrans trimmed %}
          For security reasons, OSdatascanner cannot interact with your files or emails in any way.
          For this reason, you must manually delete or handle the matched file. Pressing the
          'handle'-button in OSdatascanner only removes the match from the overview.
        {% endblocktrans %}
      </p>
      <p>
        {% trans "You can manually access the file or email by pressing the 'copy'- or 'open'-buttons below the name of the match." %}
      </p>

      <h2 id="open_file">{% trans "Why can't I open file scan matches?" %}</h2>
      <p>
        {% blocktrans trimmed %}
          OSdatascanner is not located on your computer, but on an external server. You are accessing
          that server through your browser.
        {% endblocktrans %}
      </p>
      <p>
        {% blocktrans trimmed %}
          For security reasons, modern browsers are not allowed to open a file on your computer.
          This also prevents OSdatascanner from doing the same.
        {% endblocktrans %}
      </p>
      <p>
        {% blocktrans trimmed %}
          To find the file, which a match has been found in, click the 'Copy Folder' button on the match,
          then open your pathfinder on your computer, and paste in the content of your clipboard.
        {% endblocktrans %}
      </p>

      {% if categorization %}
        <h2 id="how_categorize">{% trans "Why are my emails not categorized in Outlook?" %}</h2>
        <p>
          {% blocktrans trimmed %}
            To categorize emails in your Outlook client, you must toggle the setting "Categorize emails"
            on your <a href="{{ my-account }}">profile page</a>. See more information in
            <a href="#categorize">the manual</a>.
          {% endblocktrans %}
        </p>
        <p>
          {% blocktrans trimmed %}
            If the setting is already on, future matches will categorize the corresponding email
            in your Outlook client. To categorize the previously matched emails, you must use the
            "Categorize" function on your <a href="{{ my-account }}">profile page</a>.
          {% endblocktrans %}
        </p>
      {% endif %}
    </div>

  </main>

  {% include "components/common/scripts.html" %}
</body>
