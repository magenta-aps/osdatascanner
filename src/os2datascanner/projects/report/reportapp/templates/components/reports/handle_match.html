{% load i18n l10n %}

<div class="table-toolbar__content-left">
  {% if settings.HANDLE_DROPDOWN %}

    <button type="button"
            class="table-checkbox__action button button--icon-text-button"
            disabled
            id="mass_handle_button"
            aria-label="{{ mass_handle_tooltip }}"
            title="{{ mass_handle_tooltip }} - {{ deletion_disclaimer }}">
      <i class="material-icons text-secondary" aria-hidden="true">archive</i>
      <span>{{ mass_mark_as_handled }}</span>
    </button>

    <div class="dropdown-container">
      <div class="handle-dropdown">
        <ul hx-swap="afterend"
            hx-target="this"
            hx-indicator="#mass_handle_button"
            {% if request.user.account.time_since_last_handle > 172800 %}hx-confirm="{{ mass_handle_confirm_text }}"{% endif %}>

          {% if "/archive" in request.path %}
            <li class="handle-option button button--text-button"
                hx-post="{% url 'mass-handle' %}"
                hx-trigger="click"
                name="handle-matches"
                hx-push-url="false"
                hx-vals='{"action":None}'>{{ mark_as_unhandled }}</li>
          {% endif %}

          {% for choice in resolution_choices %}
            <li class="handle-option button button--text-button"
                hx-post="{% url 'mass-handle' %}"
                hx-trigger="click"
                name="handle-matches"
                hx-push-url="false"
                hx-vals='{"action":"{{ choice|first }}"}'>{{ choice|last }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>

  {% else %}
 
    <button type="button"
            class="table-checkbox__action button button--icon-text-button"
            data-status="match-handle"
            disabled
            aria-label="{{ mass_handle_tooltip }}"
            title="{{ mass_handle_tooltip }} - {{ deletion_disclaimer }}"
            name="handle-matches"
            hx-post="{% url 'mass-handle' %}"
            hx-swap="none"
            hx-trigger="click"
            hx-push-url="false"
            {% if "/archive" in request.path %} hx-vals='{"action":None}' {% else %} hx-vals='{"action":"0"}' {% endif %}
            {% if request.user.account.time_since_last_handle > 172800 %}hx-confirm="{{ mass_handle_confirm_text }}"{% endif %}>
      <i class="material-icons text-secondary" aria-hidden="true">archive</i>
 
      <span>
        {% if "/archive/" in request.path %}
          {{ mark_as_unhandled }}
        {% else %}
          {{ mass_mark_as_handled }}
        {% endif %}
      </span>
    </button>
  {% endif %}


  {% for button in delete_buttons %}
    <button type="button"
            class="table-checkbox__action button button--icon-text-button"
            disabled
            aria-label="{{ button.tooltip }}"
            title="{{ button.tooltip }}"
            hx-post="{{ button.url }}"
            hx-swap="none"
            hx-trigger="click"
            hx-push-url="false"
            hx-confirm="{{ button.confirm_text }}"
            name="mass-delete">
      <i class="material-icons">delete_forever</i>
      <span>{{ button.button_text }}</span>
    </button>
  {% endfor %}

  <span class="selected-cb">
    <span class="num-selected">0</span> {% trans "of" %} {{ document_reports|length }} {% trans "selected" %}
  </span>
</div>
