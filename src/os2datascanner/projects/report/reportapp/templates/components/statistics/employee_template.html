{% load i18n %}

<tr class="datatablex__row employee_row">
  <td class="column--employee">
    <div class="employee__container">
      <div class="overflow-ellipsis">
        <span class="employee__fullname">{{ employee.get_full_name|title }}</span>
      </div>
 
      <div class="overflow-ellipsis">
        <span class="employee__username">{{ employee.username|lower }}</span>
      </div>
    </div>
  </td>

  <td class="column--matches column--numeral">
    <div class="matches_container">
      <div class="matches">
        <span class="datatable-numeral">{{ employee.match_count }}</span>
      </div>
      {% if employee.false_positive_alarm %}
        <span class="warning-symbol material-symbols-outlined" title="{% trans "The user's false positive rate is unusually high:" %} {{ employee.false_positive_percentage }}%">
          warning
        </span>
      {% endif %}
    </div>
  </td>

  <td class="column--withheld column--numeral">
    <div class="matches_container">
      <div class="matches">
        <span class="datatable-numeral">{{ employee.withheld_matches }}</span>
      </div>
    </div>
  </td>

  <td class="column--status">
    <div class="status tag" data-status="{{ employee.match_status }}">{{ employee.status }}</div>
  </td>

  <td class="column--actions">
    <div class="action-wrapper">
      <div class="button-group">
        <a href="mailto:{{ employee.email }}?body=Matches: {{ employee.match_count }}"
           class="button button--text-button"
           aria-label="{% trans 'Send notification to' %} {{ employee.get_full_name }}"
           title="{% trans 'Send notification to' %} {{ employee.get_full_name }}">{% trans "Send notification" %}</a>
        <button type="button"
                class="overview-expand button button--caret-button"
                aria-label="{% trans 'Show/hide overview' %}"
                title="{% trans 'Show/hide overview' %}">
          <i id="expand_more" class="material-icons" aria-hidden="true">expand_more</i>
        </button>
      </div>
    </div>
  </td>
</tr>

<tr class="user-overview datatablex__row" hidden>
  <td colspan="5">
    <div class="overview_wrapper"
         hx-get="{% url 'statistics-user-id' employee.uuid %}"
         hx-trigger="intersect"
         hx-swap="outerHTML"
         hx-target="this"
         hx-select=".overview_wrapper"
         hx-push-url="false">
      <div class="loading">
        <svg class="relative page-indicator"
             id="report-page-indicator"
             viewbox="0 0 100 100">
          <circle id="circle" cx="50" cy="50" r="45"></circle>
        </svg>
      </div>
    </div>
  </td>
</tr>
